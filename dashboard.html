<!DOCTYPE html>
<html>
  <style>
    

      body {
        margin: 0;
        font-family: sans-serif;  /* Apply sans-serif font */
        background-color: #850fe6
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        min-height: 100vh;
        padding: 20px;
        background-color:white;
      }

      .login-box {
        max-width: 300px;
        margin: 100px auto;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        font-family: sans-serif;
        }

        .login-box input {
        width: 100%;
        padding: 10px;
        margin-bottom: 15px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
        }

        .button-container {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 10px;
        }

        .button-container button {
        padding: 10px 15px;
        background-color: #007BFF;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        }

        .button-container button:hover {
        background-color: #0056b3;
        }
  </style>
    <div class = "container">
        <head>
            <title>Dashboard</title>
        </head>
        <body>
            <img src="homepageassets/Logo.png" width="100">
            <h1>Welcome to your Delta Tuition Dashboard</h1>
            <p id="user-status"></p>
            <p>This website will eventually display all of your homeworks, tests, allow you to schedule lessons and make payments etc.</p>
            <button id="logout-button">Log out</button>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
      import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js";
      import { firebaseConfig } from "./firebase-config.js";

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      // Run after the DOM is fully loaded
      document.addEventListener("DOMContentLoaded", () => {
        const status = document.getElementById("user-status");
        const logoutBtn = document.getElementById("logout-button");

        // Check auth state
        onAuthStateChanged(auth, (user) => {
          console.log("Auth state changed:", user); // For debugging
          if (user) {
            status.textContent = `Logged in as ${user.email}`;
          } else {
            window.location.href = "index.html";
          }
        });

        // Add click event listener instead of onclick attribute
        logoutBtn.addEventListener("click", async () => {
          try {
            await signOut(auth);
            window.location.href = "index.html";
          } catch (error) {
            console.error("Sign out failed:", error);
          }
        });
      });
    </script>
  </body>
</html>